<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Defining a Belief Updater · POMDPs.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="POMDPs.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">POMDPs.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../">POMDPs.jl</a></li><li><a class="tocitem" href="../install/">Installation</a></li><li><a class="tocitem" href="../get_started/">Getting Started</a></li><li><a class="tocitem" href="../concepts/">Concepts and Architecture</a></li></ul></li><li><span class="tocitem">Defining (PO)MDP Models</span><ul><li><a class="tocitem" href="../def_pomdp/">Defining POMDPs and MDPs</a></li><li><a class="tocitem" href="../static/">Defining Static (PO)MDP Properties</a></li><li><a class="tocitem" href="../interfaces/">Spaces and Distributions</a></li><li><a class="tocitem" href="../dynamics/">Defining (PO)MDP Dynamics</a></li></ul></li><li><span class="tocitem">Writing Solvers</span><ul><li><a class="tocitem" href="../def_solver/">Solvers</a></li><li><a class="tocitem" href="../offline_solver/">Example: Defining an offline solver</a></li><li><a class="tocitem" href="../online_solver/">Example: Defining an online solver</a></li></ul></li><li><span class="tocitem">Writing Belief Updaters</span><ul><li class="is-active"><a class="tocitem" href>Defining a Belief Updater</a><ul class="internal"><li><a class="tocitem" href="#Defining-a-Belief-Type"><span>Defining a Belief Type</span></a></li><li><a class="tocitem" href="#Defining-an-Updater"><span>Defining an Updater</span></a></li></ul></li></ul></li><li><span class="tocitem">Analyzing Results</span><ul><li><a class="tocitem" href="../simulation/">Simulation Standard</a></li><li><a class="tocitem" href="../run_simulation/">Running Simulations</a></li><li><a class="tocitem" href="../policy_interaction/">Interacting with Policies</a></li></ul></li><li><a class="tocitem" href="../faq/">Frequently Asked Questions (FAQ)</a></li><li><a class="tocitem" href="../api/">API Documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Writing Belief Updaters</a></li><li class="is-active"><a href>Defining a Belief Updater</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Defining a Belief Updater</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/master/docs/src/def_updater.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Defining-a-Belief-Updater"><a class="docs-heading-anchor" href="#Defining-a-Belief-Updater">Defining a Belief Updater</a><a id="Defining-a-Belief-Updater-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-a-Belief-Updater" title="Permalink"></a></h1><p>In this section we list the requirements for defining a belief updater. For a description of what a belief updater is, see <a href="../concepts/#Beliefs-and-Updaters">Concepts and Architecture - Beliefs and Updaters</a>. Typically a belief updater will have an associated belief type, and may be closely tied to a particular policy/planner.</p><h2 id="Defining-a-Belief-Type"><a class="docs-heading-anchor" href="#Defining-a-Belief-Type">Defining a Belief Type</a><a id="Defining-a-Belief-Type-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-a-Belief-Type" title="Permalink"></a></h2><p>A belief object should contain all of the information needed for the next belief update and for the policy to make a decision. The belief type could be a pre-defined type such as a distribution from <code>Distributions.jl</code> or <code>DiscreteBelief</code> or <code>SparseCat</code> from <code>POMDPModelTools.jl</code>, or it could be a custom type.</p><p>Often, but not always, the belief will represent a probability distribution. In this case, the functions in the <a href="../interfaces/#Distributions">distribution interface</a> should be implemented if possible. Implementing these functions will make the belief usable with many of the policies and planners in the POMDPs.jl ecosystem, and will make it easy for others to convert between beliefs and to interpret what a belief means.</p><h3 id="Histories-associated-with-a-belief"><a class="docs-heading-anchor" href="#Histories-associated-with-a-belief">Histories associated with a belief</a><a id="Histories-associated-with-a-belief-1"></a><a class="docs-heading-anchor-permalink" href="#Histories-associated-with-a-belief" title="Permalink"></a></h3><p>If a complete or partial record of the action-observation history leading up to a belief is available, it is often helpful to give access to this by implementing the <a href="../api/#POMDPs.history"><code>history</code></a> or <a href="../api/#POMDPs.currentobs"><code>currentobs</code></a> functions (see the docstrings for more details). This is especially useful if a problem-writer wants to implement a belief- or observation-dependent action space. Belief type implementers need only implement <code>history</code>, and <code>currentobs</code> will automatically be provided, though sometimes it is more convenient to implement <code>currentobs</code> directly.</p><h2 id="Defining-an-Updater"><a class="docs-heading-anchor" href="#Defining-an-Updater">Defining an Updater</a><a id="Defining-an-Updater-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-an-Updater" title="Permalink"></a></h2><p>To create an updater, one should define a subtype of the <code>Updater</code> abstract type and implement two methods, one to create the initial belief from the problem&#39;s initial state distribution and one to perform a belief update:</p><ul><li><a href="../api/#POMDPs.initialize_belief"><code>initialize_belief(updater, d)</code></a> creates a belief from state distribution <code>d</code> appropriate to use with the updater. To extract information from <code>d</code>, use the functions from the <a href="../interfaces/#Distributions">distribution interface</a>.</li><li><a href="../api/#POMDPs.update"><code>update(updater, b, a, o)</code></a> returns an updated belief given belief <code>b</code>, action <code>a</code>, and observation <code>o</code>. One can usually expect <code>b</code> to be the same type returned by <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a> because a careful user will always call <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a> before <a href="../api/#POMDPs.update"><code>update</code></a>, but it would also be reasonable to implement <a href="../api/#POMDPs.update"><code>update</code></a> for <code>b</code> of a different type if it is desirable to handle multiple belief types.</li></ul><h3 id="Example:-History-Updater"><a class="docs-heading-anchor" href="#Example:-History-Updater">Example: History Updater</a><a id="Example:-History-Updater-1"></a><a class="docs-heading-anchor-permalink" href="#Example:-History-Updater" title="Permalink"></a></h3><p>One trivial type of belief would be the action-observation history, a list containing the initial state distribution and every action taken and observation received. The history contains all of the information received up to the current time, but it is not usually very useful because most policies make decisions based on a state probability distribution. Here the belief type is simply the built in <code>Vector{Any}</code>, so we need only create the updater and write <a href="../api/#POMDPs.update"><code>update</code></a> and <a href="../api/#POMDPs.initialize_belief"><code>initialize_belief</code></a>. Normally, <a href="../api/#POMDPs.update"><code>update</code></a> would contain belief update probability calculations, but in this example, we simply append the action and observation to the history.</p><p>(Note that this example is designed for readability rather than efficiency.)</p><pre><code class="language-julia hljs">import POMDPs

struct HistoryUpdater &lt;: POMDPs.Updater end

initialize_belief(up::HistoryUpdater, d) = Any[d]

function POMDPs.update(up::HistoryUpdater, b, a, o)
    bp = copy(b)
    push!(bp, a)
    push!(bp, o)
    return bp
end</code></pre><p>At each step, the history starts with the original distribution, then contains all the actions and observations received up to that point. The example below shows this for the crying baby problem (observations are true/false for crying and actions are true/false for feeding).</p><pre><code class="language-julia hljs">using POMDPPolicies
using POMDPSimulators
using POMDPModels
using Random

pomdp = BabyPOMDP()
policy = RandomPolicy(pomdp, rng=MersenneTwister(1))
up = HistoryUpdater()

# within stepthrough initialize_belief is called on the initial state distribution of the pomdp, then update is called at each step.
for b in stepthrough(pomdp, policy, up, &quot;b&quot;, rng=MersenneTwister(2), max_steps=5)
    @show b
end

# output

b = Any[POMDPModels.BoolDistribution(0.0)]
b = Any[POMDPModels.BoolDistribution(0.0), false, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false, true, false]
b = Any[POMDPModels.BoolDistribution(0.0), false, false, false, false, true, false, true, false]</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../online_solver/">« Example: Defining an online solver</a><a class="docs-footer-nextpage" href="../simulation/">Simulation Standard »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Saturday 14 August 2021 03:37">Saturday 14 August 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
