<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>CommonRLInterface Integration · POMDPs.jl</title><meta name="title" content="CommonRLInterface Integration · POMDPs.jl"/><meta property="og:title" content="CommonRLInterface Integration · POMDPs.jl"/><meta property="twitter:title" content="CommonRLInterface Integration · POMDPs.jl"/><meta name="description" content="Documentation for POMDPs.jl."/><meta property="og:description" content="Documentation for POMDPs.jl."/><meta property="twitter:description" content="Documentation for POMDPs.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="POMDPs.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">POMDPs.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">POMDPs.jl</a></li><li><span class="tocitem">Basics</span><ul><li><a class="tocitem" href="../../install/">Installation</a></li><li><a class="tocitem" href="../../get_started/">Getting Started</a></li><li><a class="tocitem" href="../../concepts/">Concepts and Architecture</a></li></ul></li><li><span class="tocitem">Defining (PO)MDP Models</span><ul><li><a class="tocitem" href="../../def_pomdp/">Defining POMDPs and MDPs</a></li><li><a class="tocitem" href="../../interfaces/">Spaces and Distributions</a></li></ul></li><li><span class="tocitem">Writing Solvers</span><ul><li><a class="tocitem" href="../../def_solver/">Solvers</a></li><li><a class="tocitem" href="../../offline_solver/">Example: Defining an offline solver</a></li><li><a class="tocitem" href="../../online_solver/">Example: Defining an online solver</a></li></ul></li><li><span class="tocitem">Writing Belief Updaters</span><ul><li><a class="tocitem" href="../../def_updater/">Defining a Belief Updater</a></li></ul></li><li><span class="tocitem">Analyzing Results</span><ul><li><a class="tocitem" href="../../simulation/">Simulation Standard</a></li><li><a class="tocitem" href="../../run_simulation/">Running Simulations</a></li><li><a class="tocitem" href="../../policy_interaction/">Interacting with Policies</a></li></ul></li><li><span class="tocitem">Examples and Gallery</span><ul><li><a class="tocitem" href="../../examples/">Examples</a></li><li><a class="tocitem" href="../../example_defining_problems/">Defining a POMDP</a></li><li><a class="tocitem" href="../../example_solvers/">Using Different Solvers</a></li><li><a class="tocitem" href="../../example_simulations/">Simulations Examples</a></li><li><a class="tocitem" href="../../example_gridworld_mdp/">GridWorld MDP Tutorial</a></li><li><a class="tocitem" href="../../gallery/">Gallery of POMDPs.jl Problems</a></li></ul></li><li><span class="tocitem">POMDPTools</span><ul><li><a class="tocitem" href="../">POMDPTools: the standard library for POMDPs.jl</a></li><li><a class="tocitem" href="../distributions/">Implemented Distributions</a></li><li><a class="tocitem" href="../model/">Model Tools</a></li><li><a class="tocitem" href="../visualization/">Visualization</a></li><li><a class="tocitem" href="../beliefs/">Implemented Belief Updaters</a></li><li><a class="tocitem" href="../policies/">Implemented Policies</a></li><li><a class="tocitem" href="../simulators/">Implemented Simulators</a></li><li class="is-active"><a class="tocitem" href>CommonRLInterface Integration</a><ul class="internal"><li><a class="tocitem" href="#Environment-Wrapper-Types"><span>Environment Wrapper Types</span></a></li><li><a class="tocitem" href="#Constructors"><span>Constructors</span></a></li></ul></li><li><a class="tocitem" href="../testing/">Testing</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../../faq/">Frequently Asked Questions (FAQ)</a></li><li><a class="tocitem" href="../../api/">API Documentation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">POMDPTools</a></li><li class="is-active"><a href>CommonRLInterface Integration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>CommonRLInterface Integration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaPOMDP/POMDPs.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/master/docs/src/POMDPTools/common_rl.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="CommonRLInterface-Integration"><a class="docs-heading-anchor" href="#CommonRLInterface-Integration">CommonRLInterface Integration</a><a id="CommonRLInterface-Integration-1"></a><a class="docs-heading-anchor-permalink" href="#CommonRLInterface-Integration" title="Permalink"></a></h1><p>POMDPTools provides two-way integration with the <a href="https://github.com/JuliaReinforcementLearning/CommonRLInterface.jl">CommonRLInterface.jl package</a>. Using the <a href="https://docs.julialang.org/en/v1/manual/conversion-and-promotion/#Conversion"><code>convert</code> function</a>, one can convert an <code>MDP</code> or <code>POMDP</code> object to a CommonRLInterface environment, or vice-versa.</p><p>For example,</p><pre><code class="language-julia hljs">using POMDPs
using POMDPTools
using POMDPModels
using CommonRLInterface

env = convert(AbstractEnv, BabyPOMDP())

r = act!(env, true)
observe(env)</code></pre><p>converts a Crying Baby POMDP to an RL environment and acts in and observes the environment. This environment (or any other CommonRLInterface environment), can be converted to an <code>MDP</code> or <code>POMDP</code>:</p><pre><code class="language-julia hljs">using BasicPOMCP

m = convert(POMDP, env)
planner = solve(POMCPSolver(), m)
a = action(planner, initialstate(m))</code></pre><p>You can also use the constructors listed below to manually convert between the interfaces.</p><h2 id="Environment-Wrapper-Types"><a class="docs-heading-anchor" href="#Environment-Wrapper-Types">Environment Wrapper Types</a><a id="Environment-Wrapper-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Environment-Wrapper-Types" title="Permalink"></a></h2><p>Since the standard reinforcement learning environment interface offers less information about the internal workings of the environment than the POMDPs.jl interface, MDPs and POMDPs created from these environments will have limited functionality. There are two types of (PO)MDP types that can wrap an environment:</p><h3 id="Generative-model-wrappers"><a class="docs-heading-anchor" href="#Generative-model-wrappers">Generative model wrappers</a><a id="Generative-model-wrappers-1"></a><a class="docs-heading-anchor-permalink" href="#Generative-model-wrappers" title="Permalink"></a></h3><p>If the <code>state</code> and <code>setstate!</code> CommonRLInterface functions are provided, then the environment can be wrapped in a <a href="#POMDPTools.CommonRLIntegration.RLEnvMDP"><code>RLEnvMDP</code></a> or <a href="#POMDPTools.CommonRLIntegration.RLEnvPOMDP"><code>RLEnvPOMDP</code></a> and the POMDPs.jl generative model interface will be available.</p><h3 id="Opaque-wrappers"><a class="docs-heading-anchor" href="#Opaque-wrappers">Opaque wrappers</a><a id="Opaque-wrappers-1"></a><a class="docs-heading-anchor-permalink" href="#Opaque-wrappers" title="Permalink"></a></h3><p>If the <code>state</code> and <code>setstate!</code> are not provided, then the resulting <code>POMDP</code> or <code>MDP</code> can only be simulated. This case is represented using the <a href="#POMDPTools.CommonRLIntegration.OpaqueRLEnvPOMDP"><code>OpaqueRLEnvPOMDP</code></a> and <a href="#POMDPTools.CommonRLIntegration.OpaqueRLEnvMDP"><code>OpaqueRLEnvMDP</code></a> wrappers. From the POMDPs.jl perspective, the state of the opaque (PO)MDP is just an integer wrapped in an <code>OpaqueRLEnvState</code>. This keeps track of the &quot;age&quot; of the environment so that POMDPs.jl actions that attempt to interact with the environment at a different age are invalid.</p><h2 id="Constructors"><a class="docs-heading-anchor" href="#Constructors">Constructors</a><a id="Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors" title="Permalink"></a></h2><h3 id="Creating-RL-environments-from-MDPs-and-POMDPs"><a class="docs-heading-anchor" href="#Creating-RL-environments-from-MDPs-and-POMDPs">Creating RL environments from MDPs and POMDPs</a><a id="Creating-RL-environments-from-MDPs-and-POMDPs-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-RL-environments-from-MDPs-and-POMDPs" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.MDPCommonRLEnv" href="#POMDPTools.CommonRLIntegration.MDPCommonRLEnv"><code>POMDPTools.CommonRLIntegration.MDPCommonRLEnv</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">MDPCommonRLEnv(m, [s])
MDPCommonRLEnv{RLO}(m, [s])</code></pre><p>Create a CommonRLInterface environment from MDP m; optionally specify the state &#39;s&#39;.</p><p>The <code>RLO</code> parameter can be used to specify a type to convert the observation to. By default, this is <code>AbstractArray</code>. Use <code>Any</code> to disable conversion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/to_env.jl#L13-L20">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.POMDPCommonRLEnv" href="#POMDPTools.CommonRLIntegration.POMDPCommonRLEnv"><code>POMDPTools.CommonRLIntegration.POMDPCommonRLEnv</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">POMDPCommonRLEnv(m, [s], [o])
POMDPCommonRLEnv{RLO}(m, [s], [o])</code></pre><p>Create a CommonRLInterface environment from POMDP m; optionally specify the state &#39;s&#39; and observation &#39;o&#39;.</p><p>The <code>RLO</code> and <code>RLS</code> parameters can be used to specify types to convert the observation and state to. By default, this is <code>AbstractArray</code>. Use <code>Any</code> to disable conversion.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/to_env.jl#L56-L63">source</a></section></article><h3 id="Creating-MDPs-and-POMDPs-from-RL-environments"><a class="docs-heading-anchor" href="#Creating-MDPs-and-POMDPs-from-RL-environments">Creating MDPs and POMDPs from RL environments</a><a id="Creating-MDPs-and-POMDPs-from-RL-environments-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-MDPs-and-POMDPs-from-RL-environments" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.RLEnvMDP" href="#POMDPTools.CommonRLIntegration.RLEnvMDP"><code>POMDPTools.CommonRLIntegration.RLEnvMDP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RLEnvMDP(env; discount=1.0)</code></pre><p>Create an <code>MDP</code> by wrapping a <code>CommonRLInterface.AbstractEnv</code>. <code>state</code> and <code>setstate!</code> from <code>CommonRLInterface</code> must be provided, and the <code>POMDPs</code> generative model functionality will be provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/from_env.jl#L51-L55">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.RLEnvPOMDP" href="#POMDPTools.CommonRLIntegration.RLEnvPOMDP"><code>POMDPTools.CommonRLIntegration.RLEnvPOMDP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">RLEnvPOMDP(env; discount=1.0)</code></pre><p>Create an <code>POMDP</code> by wrapping a <code>CommonRLInterface.AbstractEnv</code>. <code>state</code> and <code>setstate!</code> from <code>CommonRLInterface</code> must be provided, and the <code>POMDPs</code> generative model functionality will be provided.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/from_env.jl#L73-L77">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.OpaqueRLEnvMDP" href="#POMDPTools.CommonRLIntegration.OpaqueRLEnvMDP"><code>POMDPTools.CommonRLIntegration.OpaqueRLEnvMDP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OpaqueRLEnvMDP(env; discount=1.0)</code></pre><p>Wrap a <code>CommonRLInterface.AbstractEnv</code> in an <code>MDP</code> object. The state will be an <code>OpaqueRLEnvState</code> and only simulation will be supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/from_env.jl#L119-L123">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="POMDPTools.CommonRLIntegration.OpaqueRLEnvPOMDP" href="#POMDPTools.CommonRLIntegration.OpaqueRLEnvPOMDP"><code>POMDPTools.CommonRLIntegration.OpaqueRLEnvPOMDP</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">OpaqueRLEnvPOMDP(env; discount=1.0)</code></pre><p>Wrap a <code>CommonRLInterface.AbstractEnv</code> in an <code>POMDP</code> object. The state will be an <code>OpaqueRLEnvState</code> and only simulation will be supported.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaPOMDP/POMDPs.jl/blob/eedb23520ced1f275c843d1d78d3a9adb47dc8c7/lib/POMDPTools/src/CommonRLIntegration/from_env.jl#L134-L138">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../simulators/">« Implemented Simulators</a><a class="docs-footer-nextpage" href="../testing/">Testing »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.10.2 on <span class="colophon-date" title="Sunday 4 May 2025 23:42">Sunday 4 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
